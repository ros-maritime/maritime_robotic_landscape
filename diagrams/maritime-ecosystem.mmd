%%{init: {'theme':'base', 'themeVariables': { 'primaryColor':'#1e88e5','primaryTextColor':'#fff','primaryBorderColor':'#0d47a1','lineColor':'#424242','secondaryColor':'#43a047','tertiaryColor':'#ff6f00'}}}%%
graph TB
    subgraph Vehicles["ðŸš¢ Vehicle Platforms"]
        ASV["ASV/USV<br/>Surface Vehicles"]
        AUV["AUV<br/>Autonomous Underwater"]
        ROV["ROV<br/>Remotely Operated"]
        Glider["Gliders<br/>Buoyancy-Driven"]
    end

    subgraph ROS["ROS 2 Ecosystem"]
        Core["ROS 2 Core<br/>- Topics/Services<br/>- TF Transforms<br/>- Launch System"]

        subgraph Stacks["Autonomy Stacks"]
            Blue["Blue<br/>(UUV Pipeline)"]
            MVP["MVP<br/>(Behavior-Based)"]
            P11["Project11<br/>(ASV Survey)"]
            Orca["Orca4<br/>(BlueROV2)"]
        end

        subgraph Software["Core Software"]
            RL["robot_localization<br/>(Sensor Fusion)"]
            Nav2["Nav2<br/>(Path Planning)"]
            RC["ros2_control<br/>(Hardware Interface)"]
        end
    end

    subgraph Sensors["ðŸ“¡ Sensors & Hardware"]
        subgraph NavSensors["Navigation"]
            DVL["DVL<br/>(Velocity)"]
            INS["INS/IMU<br/>(Orientation)"]
            GPS["GPS/GNSS<br/>(Surface)"]
            Depth["Depth/Pressure"]
        end

        subgraph PerceptionSensors["Perception"]
            Sonar["Sonar<br/>(Acoustic Imaging)"]
            Camera["Cameras<br/>(Vision)"]
            USBL["USBL/LBL<br/>(Positioning)"]
        end

        subgraph Actuators["Actuators"]
            Thrusters["Thrusters"]
            Manipulator["Manipulators"]
        end
    end

    subgraph Simulation["ðŸŽ® Simulation"]
        VRX["VRX<br/>(Gazebo ASV)"]
        DAVE["DAVE<br/>(Gazebo UUV)"]
        HoloOcean["HoloOcean<br/>(UE4 Perception)"]
        UNav["UNav-Sim<br/>(UE5 Vision)"]
    end

    subgraph Comms["ðŸ“¶ Communication"]
        AcommROS["ros_acomms<br/>(Acoustic Underwater)"]
        RF["RF/WiFi<br/>(Surface)"]
        Satellite["Satellite<br/>(Long-Range)"]
    end

    %% Connections - Vehicles to ROS
    ASV --> Core
    AUV --> Core
    ROV --> Core
    Glider --> Core

    %% ROS Internal Connections
    Core --> Stacks
    Core --> Software
    Stacks --> Software

    %% Sensors to ROS
    DVL --> RL
    INS --> RL
    GPS --> RL
    Depth --> RL
    RL --> Core

    Sonar --> Core
    Camera --> Core
    USBL --> RL

    %% ROS to Actuators
    RC --> Thrusters
    RC --> Manipulator
    Core --> RC

    %% Simulation to ROS
    VRX -.Test.-> ASV
    DAVE -.Test.-> AUV
    HoloOcean -.Test.-> AUV
    UNav -.Test.-> AUV

    %% Communication
    AcommROS --> AUV
    AcommROS --> ROV
    RF --> ASV
    Satellite --> ASV
    Satellite --> AUV

    %% Styling
    classDef vehicleClass fill:#1e88e5,stroke:#0d47a1,stroke-width:2px,color:#fff
    classDef rosClass fill:#43a047,stroke:#2e7d32,stroke-width:2px,color:#fff
    classDef sensorClass fill:#ff6f00,stroke:#e65100,stroke-width:2px,color:#fff
    classDef simClass fill:#7b1fa2,stroke:#4a148c,stroke-width:2px,color:#fff
    classDef commClass fill:#00acc1,stroke:#006064,stroke-width:2px,color:#fff

    class ASV,AUV,ROV,Glider vehicleClass
    class Core,Blue,MVP,P11,Orca,RL,Nav2,RC rosClass
    class DVL,INS,GPS,Depth,Sonar,Camera,USBL,Thrusters,Manipulator sensorClass
    class VRX,DAVE,HoloOcean,UNav simClass
    class AcommROS,RF,Satellite commClass
