<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 600" width="1000" height="600">
  <!-- Title -->
  <text x="500" y="30" font-size="22" font-weight="bold" text-anchor="middle" fill="#1e88e5">
    Underwater Acoustic Positioning Systems
  </text>

  <!-- USBL (Ultra-Short Baseline) - Left -->
  <g id="usbl">
    <rect x="30" y="60" width="450" height="500" rx="10" fill="#ff6f00" opacity="0.08" stroke="#ff6f00" stroke-width="3"/>
    <text x="255" y="90" font-size="18" font-weight="bold" text-anchor="middle" fill="#ff6f00">USBL (Ultra-Short Baseline)</text>

    <!-- Surface vessel -->
    <rect x="200" y="120" width="110" height="40" rx="5" fill="#666" stroke="#424242" stroke-width="2"/>
    <text x="255" y="145" font-size="11" text-anchor="middle" fill="white">Surface Vessel</text>

    <!-- USBL transducer (single unit on surface) -->
    <rect x="235" y="160" width="40" height="15" rx="3" fill="#ff6f00" stroke="#e65100" stroke-width="2"/>
    <text x="255" y="171" font-size="8" text-anchor="middle" fill="white">USBL</text>
    <text x="255" y="195" font-size="9" text-anchor="middle" fill="#ff6f00">Transducer Array</text>

    <!-- Water line -->
    <line x1="50" y1="210" x2="460" y2="210" stroke="#00acc1" stroke-width="3" stroke-dasharray="10,5"/>
    <text x="50" y="205" font-size="10" fill="#00acc1">Water Surface</text>

    <!-- Acoustic signals (range + bearing) -->
    <path d="M 255 175 Q 200 300, 180 420" fill="none" stroke="#ff6f00" stroke-width="2" stroke-dasharray="5,3" opacity="0.6"/>
    <path d="M 255 175 Q 255 300, 255 420" fill="none" stroke="#ff6f00" stroke-width="2" opacity="0.6"/>
    <path d="M 255 175 Q 310 300, 330 420" fill="none" stroke="#ff6f00" stroke-width="2" stroke-dasharray="5,3" opacity="0.6"/>

    <!-- Acoustic cone (bearing measurement) -->
    <defs>
      <linearGradient id="usblCone" x1="0%" y1="0%" x2="0%" y2="100%">
        <stop offset="0%" style="stop-color:#ff6f00;stop-opacity:0.2"/>
        <stop offset="100%" style="stop-color:#ff6f00;stop-opacity:0.05"/>
      </linearGradient>
    </defs>
    <path d="M 255 175 L 160 430 L 350 430 Z" fill="url(#usblCone)"/>

    <!-- AUV with transponder -->
    <ellipse cx="255" cy="420" rx="40" ry="12" fill="#1e88e5" stroke="#0d47a1" stroke-width="2"/>
    <circle cx="255" cy="432" r="6" fill="#ff6f00" stroke="#e65100" stroke-width="1.5"/>
    <text x="255" y="455" font-size="9" text-anchor="middle" fill="#666">AUV (Transponder)</text>

    <!-- Range measurement -->
    <line x1="305" y1="175" x2="305" y2="420" stroke="#43a047" stroke-width="2" marker-end="url(#arrowGreen)"/>
    <text x="315" y="300" font-size="10" fill="#43a047" font-weight="bold">Range (R)</text>
    <text x="315" y="315" font-size="9" fill="#43a047">Time-of-flight</text>

    <!-- Bearing angle -->
    <path d="M 255 175 L 255 250" stroke="#1e88e5" stroke-width="1.5"/>
    <path d="M 255 175 L 310 250" stroke="#1e88e5" stroke-width="1.5"/>
    <path d="M 255 200 A 25 25 0 0 1 275 215" fill="none" stroke="#1e88e5" stroke-width="1.5"/>
    <text x="280" y="215" font-size="9" fill="#1e88e5">θ (bearing)</text>

    <!-- Advantages/Disadvantages -->
    <text x="50" y="490" font-size="12" font-weight="bold" fill="#ff6f00">USBL Characteristics:</text>
    <text x="50" y="508" font-size="10" fill="#666">✓ Single surface unit (easy deployment)</text>
    <text x="50" y="523" font-size="10" fill="#666">✓ Provides range AND bearing</text>
    <text x="50" y="538" font-size="10" fill="#666">⚠ Accuracy: ±1-5m (degrades with range/depth)</text>
  </g>

  <!-- LBL (Long Baseline) - Right -->
  <g id="lbl">
    <rect x="520" y="60" width="450" height="500" rx="10" fill="#1e88e5" opacity="0.08" stroke="#1e88e5" stroke-width="3"/>
    <text x="745" y="90" font-size="18" font-weight="bold" text-anchor="middle" fill="#1e88e5">LBL (Long Baseline)</text>

    <!-- Water line -->
    <line x1="540" y1="130" x2="950" y2="130" stroke="#00acc1" stroke-width="3" stroke-dasharray="10,5"/>
    <text x="540" y="125" font-size="10" fill="#00acc1">Water Surface</text>

    <!-- Seafloor transponders (4 beacons in grid) -->
    <circle cx="600" cy="520" r="12" fill="#ff6f00" stroke="#e65100" stroke-width="2"/>
    <text x="600" y="525" font-size="10" text-anchor="middle" fill="white" font-weight="bold">T1</text>

    <circle cx="890" cy="520" r="12" fill="#ff6f00" stroke="#e65100" stroke-width="2"/>
    <text x="890" y="525" font-size="10" text-anchor="middle" fill="white" font-weight="bold">T2</text>

    <circle cx="600" cy="280" r="12" fill="#ff6f00" stroke="#e65100" stroke-width="2"/>
    <text x="600" y="285" font-size="10" text-anchor="middle" fill="white" font-weight="bold">T3</text>

    <circle cx="890" cy="280" r="12" fill="#ff6f00" stroke="#e65100" stroke-width="2"/>
    <text x="890" y="285" font-size="10" text-anchor="middle" fill="white" font-weight="bold">T4</text>

    <!-- Baseline annotations -->
    <line x1="600" y1="535" x2="890" y2="535" stroke="#666" stroke-width="1.5" stroke-dasharray="3,2"/>
    <text x="745" y="552" font-size="9" text-anchor="middle" fill="#666">Baseline: 100-1000m</text>

    <!-- Seafloor -->
    <line x1="540" y1="540" x2="950" y2="540" stroke="#8d6e63" stroke-width="3"/>

    <!-- AUV in center -->
    <ellipse cx="745" cy="400" rx="45" ry="13" fill="#1e88e5" stroke="#0d47a1" stroke-width="2"/>
    <text x="745" y="405" font-size="10" text-anchor="middle" fill="white">AUV</text>

    <!-- Acoustic ranges from each transponder -->
    <line x1="600" y1="520" x2="745" y2="400" stroke="#43a047" stroke-width="2" stroke-dasharray="3,2"/>
    <text x="660" y="460" font-size="9" fill="#43a047">R₁</text>

    <line x1="890" y1="520" x2="745" y2="400" stroke="#43a047" stroke-width="2" stroke-dasharray="3,2"/>
    <text x="825" y="460" font-size="9" fill="#43a047">R₂</text>

    <line x1="600" y1="280" x2="745" y2="400" stroke="#43a047" stroke-width="2" stroke-dasharray="3,2"/>
    <text x="660" y="340" font-size="9" fill="#43a047">R₃</text>

    <line x1="890" y1="280" x2="745" y2="400" stroke="#43a047" stroke-width="2" stroke-dasharray="3,2"/>
    <text x="825" y="340" font-size="9" fill="#43a047">R₄</text>

    <!-- Trilateration circles (conceptual) -->
    <circle cx="745" cy="400" r="60" fill="none" stroke="#1e88e5" stroke-width="1" stroke-dasharray="2,2" opacity="0.3"/>
    <circle cx="745" cy="400" r="90" fill="none" stroke="#1e88e5" stroke-width="1" stroke-dasharray="2,2" opacity="0.3"/>

    <!-- Position solution -->
    <circle cx="745" cy="400" r="8" fill="#43a047" opacity="0.6"/>
    <text x="760" y="395" font-size="10" fill="#43a047" font-weight="bold">Position</text>
    <text x="760" y="408" font-size="9" fill="#43a047">(trilateration)</text>

    <!-- Calibration note -->
    <rect x="560" y="160" width="160" height="60" rx="5" fill="#fff9c4" stroke="#f57c00" stroke-width="1.5"/>
    <text x="640" y="178" font-size="10" text-anchor="middle" fill="#f57c00" font-weight="bold">⚠ Requires Calibration</text>
    <text x="640" y="193" font-size="8" text-anchor="middle" fill="#666">Must survey exact</text>
    <text x="640" y="205" font-size="8" text-anchor="middle" fill="#666">transponder positions</text>
    <text x="640" y="217" font-size="8" text-anchor="middle" fill="#666">before deployment</text>

    <!-- Advantages/Disadvantages -->
    <text x="540" y="175" font-size="12" font-weight="bold" fill="#1e88e5">LBL Characteristics:</text>
    <text x="730" y="175" font-size="10" fill="#666">✓ High accuracy (±0.1-1m)</text>
    <text x="730" y="190" font-size="10" fill="#666">✓ Accuracy constant with depth</text>
    <text x="730" y="205" font-size="10" fill="#666">✗ Requires seafloor transponder array</text>
    <text x="730" y="220" font-size="10" fill="#666">✗ Complex deployment/calibration</text>
    <text x="730" y="235" font-size="10" fill="#666">✗ Limited to surveyed area</text>
  </g>

  <!-- Comparison Footer -->
  <text x="500" y="585" font-size="12" text-anchor="middle" fill="#333" font-weight="bold">
    Selection: USBL for dynamic operations, LBL for high-precision surveys in fixed areas
  </text>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrowGreen" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
      <polygon points="0 0, 8 4, 0 8" fill="#43a047"/>
    </marker>
  </defs>
</svg>
