<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 650" width="900" height="650">
  <!-- Title -->
  <text x="450" y="30" font-size="22" font-weight="bold" text-anchor="middle" fill="#1e88e5">
    Maritime Robot TF Tree Structure
  </text>

  <!-- Map Frame (Root) -->
  <g id="map">
    <rect x="380" y="60" width="140" height="50" rx="8" fill="#43a047" stroke="#2e7d32" stroke-width="3"/>
    <text x="450" y="85" font-size="16" font-weight="bold" text-anchor="middle" fill="white">map</text>
    <text x="450" y="100" font-size="9" text-anchor="middle" fill="#c8e6c9">(World-fixed frame)</text>
  </g>

  <!-- Odom Frame -->
  <g id="odom">
    <rect x="380" y="150" width="140" height="50" rx="8" fill="#1e88e5" stroke="#0d47a1" stroke-width="3"/>
    <text x="450" y="175" font-size="16" font-weight="bold" text-anchor="middle" fill="white">odom</text>
    <text x="450" y="190" font-size="9" text-anchor="middle" fill="#bbdefb">(Continuous frame)</text>

    <!-- Arrow from map to odom -->
    <line x1="450" y1="110" x2="450" y2="150" stroke="#333" stroke-width="3" marker-end="url(#arrowBlack)"/>
    <text x="465" y="132" font-size="10" fill="#666" font-weight="bold">map → odom</text>
    <text x="545" y="125" font-size="8" fill="#666">Published by:</text>
    <text x="545" y="137" font-size="8" fill="#666">amcl (ASV)</text>
    <text x="545" y="148" font-size="8" fill="#666">or GPS converter</text>
  </g>

  <!-- Base Link -->
  <g id="base-link">
    <rect x="380" y="240" width="140" height="50" rx="8" fill="#ff6f00" stroke="#e65100" stroke-width="3"/>
    <text x="450" y="265" font-size="16" font-weight="bold" text-anchor="middle" fill="white">base_link</text>
    <text x="450" y="280" font-size="9" text-anchor="middle" fill="#ffe0b2">(Vehicle center)</text>

    <!-- Arrow from odom to base_link -->
    <line x1="450" y1="200" x2="450" y2="240" stroke="#333" stroke-width="3" marker-end="url(#arrowBlack)"/>
    <text x="465" y="222" font-size="10" fill="#666" font-weight="bold">odom → base_link</text>
    <text x="555" y="215" font-size="8" fill="#666">Published by:</text>
    <text x="555" y="227" font-size="8" fill="#666">robot_localization</text>
  </g>

  <!-- Sensor Frames (Children of base_link) -->

  <!-- DVL -->
  <g id="dvl-link">
    <rect x="50" y="350" width="120" height="45" rx="5" fill="#42a5f5" stroke="#0d47a1" stroke-width="2"/>
    <text x="110" y="373" font-size="13" font-weight="bold" text-anchor="middle" fill="white">dvl_link</text>
    <text x="110" y="386" font-size="8" text-anchor="middle" fill="#e3f2fd">DVL sensor</text>

    <!-- Arrow from base_link -->
    <path d="M 380 265 L 170 372" stroke="#333" stroke-width="2" marker-end="url(#arrowBlack)"/>
    <text x="250" y="310" font-size="8" fill="#666">Static TF</text>
  </g>

  <!-- IMU -->
  <g id="imu-link">
    <rect x="200" y="350" width="120" height="45" rx="5" fill="#42a5f5" stroke="#0d47a1" stroke-width="2"/>
    <text x="260" y="373" font-size="13" font-weight="bold" text-anchor="middle" fill="white">imu_link</text>
    <text x="260" y="386" font-size="8" text-anchor="middle" fill="#e3f2fd">IMU/INS</text>

    <!-- Arrow from base_link -->
    <path d="M 405 290 L 280 350" stroke="#333" stroke-width="2" marker-end="url(#arrowBlack)"/>
    <text x="330" y="320" font-size="8" fill="#666">Static TF</text>
  </g>

  <!-- Camera -->
  <g id="camera-link">
    <rect x="350" y="350" width="120" height="45" rx="5" fill="#42a5f5" stroke="#0d47a1" stroke-width="2"/>
    <text x="410" y="373" font-size="13" font-weight="bold" text-anchor="middle" fill="white">camera_link</text>
    <text x="410" y="386" font-size="8" text-anchor="middle" fill="#e3f2fd">Camera</text>

    <!-- Arrow from base_link -->
    <line x1="435" y1="290" x2="425" y2="350" stroke="#333" stroke-width="2" marker-end="url(#arrowBlack)"/>
    <text x="445" y="320" font-size="8" fill="#666">Static TF</text>
  </g>

  <!-- Sonar -->
  <g id="sonar-link">
    <rect x="500" y="350" width="120" height="45" rx="5" fill="#42a5f5" stroke="#0d47a1" stroke-width="2"/>
    <text x="560" y="373" font-size="13" font-weight="bold" text-anchor="middle" fill="white">sonar_link</text>
    <text x="560" y="386" font-size="8" text-anchor="middle" fill="#e3f2fd">FLS/Imaging</text>

    <!-- Arrow from base_link -->
    <path d="M 495 290 L 540 350" stroke="#333" stroke-width="2" marker-end="url(#arrowBlack)"/>
    <text x="520" y="320" font-size="8" fill="#666">Static TF</text>
  </g>

  <!-- GPS (for ASV) -->
  <g id="gps-link">
    <rect x="650" y="350" width="120" height="45" rx="5" fill="#42a5f5" stroke="#0d47a1" stroke-width="2" opacity="0.6"/>
    <text x="710" y="373" font-size="13" font-weight="bold" text-anchor="middle" fill="white">gps_link</text>
    <text x="710" y="386" font-size="8" text-anchor="middle" fill="#e3f2fd">GPS antenna</text>

    <!-- Arrow from base_link -->
    <path d="M 520 265 L 680 350" stroke="#333" stroke-width="2" marker-end="url(#arrowBlack)" opacity="0.6"/>
    <text x="610" y="300" font-size="8" fill="#666">Static TF (ASV)</text>
  </g>

  <!-- Thruster Frames -->
  <g id="thrusters">
    <text x="50" y="440" font-size="12" font-weight="bold" fill="#666">Thruster frames (6-DOF AUV):</text>

    <!-- Thruster 1 -->
    <rect x="50" y="450" width="80" height="35" rx="3" fill="#9c27b0" stroke="#4a148c" stroke-width="1.5"/>
    <text x="90" y="470" font-size="11" text-anchor="middle" fill="white">thruster_1</text>

    <path d="M 380 290 L 110 450" stroke="#333" stroke-width="1.5" stroke-dasharray="3,2" opacity="0.4"/>

    <!-- Thruster 2-6 -->
    <rect x="140" y="450" width="80" height="35" rx="3" fill="#9c27b0" stroke="#4a148c" stroke-width="1.5"/>
    <text x="180" y="470" font-size="11" text-anchor="middle" fill="white">thruster_2</text>

    <text x="240" y="470" font-size="11" fill="#666">... (thruster_3 through thruster_6)</text>
  </g>

  <!-- Optical Frame (camera specific) -->
  <g id="camera-optical">
    <rect x="350" y="430" width="120" height="45" rx="5" fill="#7b1fa2" stroke="#4a148c" stroke-width="2"/>
    <text x="410" y="448" font-size="11" font-weight="bold" text-anchor="middle" fill="white">camera_optical</text>
    <text x="410" y="462" font-size="8" text-anchor="middle" fill="#e1bee7">ROS optical frame</text>

    <!-- Arrow from camera_link -->
    <line x1="410" y1="395" x2="410" y2="430" stroke="#333" stroke-width="2" marker-end="url(#arrowBlack)"/>
    <text x="420" y="415" font-size="8" fill="#666">90° rotation</text>
  </g>

  <!-- Legend -->
  <g id="legend">
    <rect x="50" y="520" width="800" height="110" rx="5" fill="#f5f5f5" stroke="#666" stroke-width="2"/>
    <text x="450" y="545" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">Frame Conventions & Notes</text>

    <text x="70" y="570" font-size="11" font-weight="bold" fill="#333">Standard Frames:</text>
    <text x="70" y="587" font-size="10" fill="#666">• <tspan font-weight="bold">map</tspan>: World-fixed, often ENU (East-North-Up) or lat/lon origin</text>
    <text x="70" y="603" font-size="10" fill="#666">• <tspan font-weight="bold">odom</tspan>: Continuous odometry frame (no jumps, drifts over time)</text>
    <text x="70" y="619" font-size="10" fill="#666">• <tspan font-weight="bold">base_link</tspan>: Vehicle center, FLU (Forward-Left-Up) or FRD (Forward-Right-Down) depending on convention</text>

    <text x="480" y="570" font-size="11" font-weight="bold" fill="#333">Maritime-Specific:</text>
    <text x="480" y="587" font-size="10" fill="#666">• DVL often mounted facing down (Z-axis points down)</text>
    <text x="480" y="603" font-size="10" fill="#666">• GPS antenna offset important for ASV heading</text>
    <text x="480" y="619" font-size="10" fill="#666">• Depth sensor typically at base_link (or offset if needed)</text>
  </g>

  <!-- Arrow style note -->
  <line x1="700" y1="555" x2="750" y2="555" stroke="#333" stroke-width="2" marker-end="url(#arrowBlack)"/>
  <text x="760" y="560" font-size="9" fill="#666">= Published TF transform</text>

  <line x1="700" y1="570" x2="750" y2="570" stroke="#333" stroke-width="1.5" stroke-dasharray="3,2" opacity="0.4"/>
  <text x="760" y="575" font-size="9" fill="#666">= Static TF (robot_state_publisher)</text>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrowBlack" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
      <polygon points="0 0, 8 4, 0 8" fill="#333"/>
    </marker>
  </defs>
</svg>
