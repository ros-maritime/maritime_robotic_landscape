<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500" width="800" height="500">
  <!-- Title -->
  <text x="400" y="25" font-size="20" font-weight="bold" text-anchor="middle" fill="#1e88e5">
    DVL Operation Modes: Bottom-Track vs Water-Track
  </text>

  <!-- Bottom-Track Mode (Left) -->
  <g id="bottom-track">
    <rect x="50" y="50" width="350" height="400" rx="10" fill="#1e88e5" opacity="0.05" stroke="#1e88e5" stroke-width="2"/>
    <text x="225" y="75" font-size="16" font-weight="bold" text-anchor="middle" fill="#1e88e5">Bottom-Track Mode</text>
    <text x="225" y="95" font-size="12" text-anchor="middle" fill="#43a047" font-weight="bold">✓ PREFERRED (High Accuracy)</text>

    <!-- Water surface -->
    <line x1="60" y1="110" x2="390" y2="110" stroke="#00acc1" stroke-width="2" stroke-dasharray="5,3"/>

    <!-- Vehicle -->
    <ellipse cx="225" cy="180" rx="50" ry="12" fill="#1e88e5" stroke="#0d47a1" stroke-width="2"/>
    <text x="225" y="185" font-size="9" text-anchor="middle" fill="white">AUV</text>

    <!-- DVL beams (4-beam configuration) -->
    <line x1="205" y1="192" x2="150" y2="340" stroke="#ff6f00" stroke-width="2"/>
    <line x1="225" y1="192" x2="200" y2="340" stroke="#ff6f00" stroke-width="2"/>
    <line x1="225" y1="192" x2="250" y2="340" stroke="#ff6f00" stroke-width="2"/>
    <line x1="245" y1="192" x2="300" y2="340" stroke="#ff6f00" stroke-width="2"/>

    <!-- Beam labels -->
    <text x="140" y="250" font-size="8" fill="#ff6f00" transform="rotate(-35 140 250)">Beam 1</text>
    <text x="310" y="250" font-size="8" fill="#ff6f00" transform="rotate(35 310 250)">Beam 4</text>

    <!-- Seafloor -->
    <path d="M 60 340 L 80 345 L 110 338 L 150 342 L 200 340 L 250 340 L 300 342 L 340 338 L 370 345 L 390 340 L 390 440 L 60 440 Z"
          fill="#8d6e63" stroke="#6d4c41" stroke-width="2"/>

    <!-- Beam reflections -->
    <circle cx="150" cy="340" r="4" fill="#ffd54f" opacity="0.8"/>
    <circle cx="200" cy="340" r="4" fill="#ffd54f" opacity="0.8"/>
    <circle cx="250" cy="340" r="4" fill="#ffd54f" opacity="0.8"/>
    <circle cx="300" cy="340" r="4" fill="#ffd54f" opacity="0.8"/>

    <!-- Altitude measurement -->
    <line x1="280" y1="180" x2="280" y2="340" stroke="#43a047" stroke-width="1.5" stroke-dasharray="3,2"/>
    <text x="290" y="260" font-size="10" fill="#43a047">Altitude</text>
    <text x="290" y="273" font-size="10" fill="#43a047">h = 160m</text>

    <!-- Characteristics -->
    <text x="70" y="375" font-size="11" font-weight="bold" fill="#333">Characteristics:</text>
    <text x="70" y="392" font-size="9" fill="#666">✓ High accuracy (±0.1%)</text>
    <text x="70" y="406" font-size="9" fill="#666">✓ Absolute velocity over ground</text>
    <text x="70" y="420" font-size="9" fill="#666">✗ Requires seafloor <200m altitude</text>
    <text x="70" y="434" font-size="9" fill="#666">✗ Fails over soft sediment/steep slopes</text>
  </g>

  <!-- Water-Track Mode (Right) -->
  <g id="water-track">
    <rect x="420" y="50" width="350" height="400" rx="10" fill="#ff6f00" opacity="0.05" stroke="#ff6f00" stroke-width="2"/>
    <text x="595" y="75" font-size="16" font-weight="bold" text-anchor="middle" fill="#ff6f00">Water-Track Mode</text>
    <text x="595" y="95" font-size="12" text-anchor="middle" fill="#f57c00" font-weight="bold">⚠ FALLBACK (Lower Accuracy)</text>

    <!-- Water surface -->
    <line x1="430" y1="110" x2="760" y2="110" stroke="#00acc1" stroke-width="2" stroke-dasharray="5,3"/>

    <!-- Vehicle -->
    <ellipse cx="595" cy="180" rx="50" ry="12" fill="#1e88e5" stroke="#0d47a1" stroke-width="2"/>
    <text x="595" y="185" font-size="9" text-anchor="middle" fill="white">AUV</text>

    <!-- DVL beams (measuring water column) -->
    <line x1="575" y1="192" x2="520" y2="280" stroke="#ff6f00" stroke-width="2" stroke-dasharray="3,2"/>
    <line x1="595" y1="192" x2="570" y2="280" stroke="#ff6f00" stroke-width="2" stroke-dasharray="3,2"/>
    <line x1="595" y1="192" x2="620" y2="280" stroke="#ff6f00" stroke-width="2" stroke-dasharray="3,2"/>
    <line x1="615" y1="192" x2="670" y2="280" stroke="#ff6f00" stroke-width="2" stroke-dasharray="3,2"/>

    <!-- Water column with scatterers -->
    <circle cx="530" cy="230" r="2" fill="#00acc1" opacity="0.4"/>
    <circle cx="560" cy="250" r="2" fill="#00acc1" opacity="0.4"/>
    <circle cx="590" cy="240" r="2" fill="#00acc1" opacity="0.4"/>
    <circle cx="620" cy="255" r="2" fill="#00acc1" opacity="0.4"/>
    <circle cx="650" cy="235" r="2" fill="#00acc1" opacity="0.4"/>
    <circle cx="545" cy="270" r="2" fill="#00acc1" opacity="0.4"/>
    <circle cx="605" cy="265" r="2" fill="#00acc1" opacity="0.4"/>
    <circle cx="635" cy="245" r="2" fill="#00acc1" opacity="0.4"/>

    <text x="680" y="240" font-size="9" fill="#00acc1">Particles,</text>
    <text x="680" y="252" font-size="9" fill="#00acc1">plankton,</text>
    <text x="680" y="264" font-size="9" fill="#00acc1">bubbles</text>

    <!-- Deep seafloor (too far) -->
    <path d="M 430 400 L 450 405 L 480 398 L 520 402 L 570 400 L 620 400 L 670 402 L 710 398 L 740 405 L 760 400 L 760 440 L 430 440 Z"
          fill="#8d6e63" stroke="#6d4c41" stroke-width="2" opacity="0.3"/>
    <text x="595" y="420" font-size="10" text-anchor="middle" fill="#666" opacity="0.5">Seafloor (out of range)</text>

    <!-- Altitude measurement (failed) -->
    <line x1="650" y1="180" x2="650" y2="400" stroke="#f44336" stroke-width="1.5" stroke-dasharray="3,2" opacity="0.5"/>
    <text x="660" y="290" font-size="10" fill="#f44336">Altitude</text>
    <text x="660" y="303" font-size="10" fill="#f44336">h > 200m</text>
    <text x="660" y="316" font-size="9" fill="#f44336">(no lock)</text>

    <!-- Characteristics -->
    <text x="440" y="320" font-size="11" font-weight="bold" fill="#333">Characteristics:</text>
    <text x="440" y="337" font-size="9" fill="#666">⚠ Lower accuracy (±1-3%)</text>
    <text x="440" y="351" font-size="9" fill="#666">⚠ Relative to water mass (not ground)</text>
    <text x="440" y="365" font-size="9" fill="#666">✓ Works at any altitude</text>
    <text x="440" y="379" font-size="9" fill="#666">✗ Assumes no current (often wrong)</text>
    <text x="440" y="393" font-size="9" fill="#666">✗ Drift accumulates quickly</text>
  </g>

  <!-- Comparison Footer -->
  <text x="400" y="475" font-size="11" text-anchor="middle" fill="#666" font-weight="bold">
    Best Practice: Use bottom-track when altitude &lt;200m. Switch to GPS fix if bottom-lock lost.
  </text>

  <!-- Legend -->
  <line x1="50" y1="487" x2="80" y2="487" stroke="#ff6f00" stroke-width="2"/>
  <text x="85" y="492" font-size="9" fill="#666">Acoustic beam</text>

  <line x1="170" y1="487" x2="200" y2="487" stroke="#ff6f00" stroke-width="2" stroke-dasharray="3,2"/>
  <text x="205" y="492" font-size="9" fill="#666">Water-track beam</text>
</svg>
